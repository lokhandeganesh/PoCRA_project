<html>
<meta charset="utf-8" />

<body>
  <div style='font-size:30px'>
    <button style='font-size:50px' onclick="jsPDFimages()">create pdf</button>
  </div>
</body><canvas id="myCanvas" width="578" height="200"></canvas>
<div id="pdf">
  <img src="https://www.gravatar.com/avatar/d50c83cc0c6523b4d3f6085295c953e0" alt="">
  <img src="./images/baselayer.png" alt="">
</div>

</html>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
<script type="text/javascript">
  function jsPDFimages() {
    var printDoc = new jsPDF();
    printDoc.fromHTML($('#pdf').get(0), 10, 10, { 'width': 180 });
    printDoc.save('test.pdf')
  }



  //   function toDataUrl(url, callback) {
  //   var xhr = new XMLHttpRequest();
  //   xhr.onload = function() {
  //     var reader = new FileReader();
  //     reader.onloadend = function() {
  //       callback(reader.result);
  //     };
  //     reader.readAsDataURL(xhr.response);
  //   };
  //   xhr.open('GET', url);
  //   xhr.responseType = 'blob';
  //   xhr.send();
  // }

  // // Create and save  the PDF.
  // // The argument is the Base64 string for the image.


  // function makePDF(base64Img) {
  //   return base64Img;
  // }

  // // Convert URL to Base64, then call makePDF function.
  // console.log(toDataUrl("https://as2.ftcdn.net/jpg/00/42/98/87/500_F_42988762_JMNpHWOFWnbtCBZeYsRo5PmzD28rIquS.jpg", makePDF));
  $(document).ready(function () {
    var getImageFromUrl = function (url, callback) {
      var img = new Image();
      img.onError = function () {
        alert('Cannot load image: "' + url + '"');
      };
      img.onload = function () {
        callback(img);
      };
      img.src = url;
    }
    var doc = new jsPDF('p', 'pt', 'a4');
    var createPDF = function (imgData) {

      var width = doc.internal.pageSize.width;
      var height = doc.internal.pageSize.height;
      var options = {
        pagesplit: true
      };
      doc.text(10, 20, 'test');

      return imgData;


      // /doc.addImage(imgData, 'png', 30, 80, 50, 50, 'monkey');

    }
    doc.addImage(getImageFromUrl('./images/baselayer.png', createPDF), 'png', 30, 30, 50, 50, 'monkey');
    doc.save('test.pdf');
  });





</script>